Nginx в своем составе имеет модуль Geo, который без сторонних приложений и серверов может определять страну пользователя, из специально подготовленного списка адресов. 

Исходный файл для подготовки списка требуется взять на странице https://mailfud.org/geoip-legacy/ и скачать свежий GeoIP-legacy.csv.gz
Распаковать GeoIP-legacy.csv, и запустить скрипт Python из данного репозитория.
Скрипт преобразует в нужный формат и оставит только IPv4.

Файл geo-country.conf положить на сервер рядом с nginx.conf.

В nginx.conf добавить в секцию http {} следующие строки:
geo $country {
        ranges; 
        default ETC; 
        include geo-country.conf;
    }

А в файл сервера (default) в секцию server {} следующие строки:
if ($country != RU) {   
            return 403;   
        }
